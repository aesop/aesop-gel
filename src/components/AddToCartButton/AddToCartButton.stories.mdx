import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import * as knobs from '@storybook/addon-knobs';
import ProductDetailImageFixture from '~/components/ProductDetailHeader/components/ProductDetailImage/ProductDetailImage.fixture';
import AddToCartButton from './AddToCartButton';
import AddToCartButtonFixture from './AddToCartButton.fixture';
import mockAddToCartButtonOnClick from './__mocks__/AddToCartButton.onClick';
import useAddToCart from '~/customHooks/useAddToCart';

<Meta title="Components/AddToCartButton" component={AddToCartButton} />

# AddToCartButton

<Preview>
  <Story name="Base component">
    {(() => {
      const [ addToCartState, addToCartDispatch, ADD_TO_CART_ACTION_TYPES ] = useAddToCart();
      return (
        <AddToCartButton
          dataTestRef="ADD_TO_CART_SMALL_CTA"
          productName={knobs.text('productName', AddToCartButtonFixture.productName, 'Content')}
          onClick={(sku) => mockAddToCartButtonOnClick(sku, addToCartDispatch, ADD_TO_CART_ACTION_TYPES)}
          hasError={addToCartState.hasError}
          isLoading={addToCartState.isLoading}
          isUpdateSuccessful={addToCartState.isUpdateSuccessful}
          price={knobs.text('price', AddToCartButtonFixture.price, 'Content')}
          sku={knobs.text('sku', AddToCartButtonFixture.sku, 'Content')}
        />
      )
    })()}
  </Story>
</Preview>

## API

<Props of={AddToCartButton} />
