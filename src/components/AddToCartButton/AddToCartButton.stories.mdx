import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { withKnobs } from '@storybook/addon-knobs';
import { text } from '@storybook/addon-knobs';
import { State } from '~.storybook/State';
import AddToCartButton from './AddToCartButton';
import AddToCartButtonFixture from './AddToCartButton.fixture';

<Meta
  title="Components/AddToCartButton"
  component={AddToCartButton}
  decorators={[withKnobs]}
/>

# AddToCartButton

<Preview>
  <Story name="Base component">
    <State
      initialState={{
        isFetching: false,
        isUpdateSuccessful: false,
      }}
     >
      {(state, setState) => {
        return (
          <AddToCartButton
            dataTestRef="ADD_TO_CART_SMALL_CTA"
            isLoading={state.isFetching}
            isUpdateSuccessful={state.isUpdateSuccessful}
            onClick={() => {
              setState({
                ...state,
                isFetching: true,
              });
              window.setTimeout(function mockNetworkRequest() {
                setState({
                  ...state,
                  isFetching: false,
                  isUpdateSuccessful: true,
                });
              }, 2000);
            }}
            price="$625.00"
            productName="Product"
          />
        )
      }}
    </State>
  </Story>
</Preview>

## API

<Props of={AddToCartButton} />

## Usage Example

```
<AddToCartButton />
```
