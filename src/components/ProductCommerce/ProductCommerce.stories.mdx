import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import * as knobs from '@storybook/addon-knobs';
import {
  AddToCartContextProvider,
  ProductDetailContextProvider,
  VariantSelectContextProvider,
} from '~/contexts';
import Podium from '~/components/Podium';
import { P } from '~/components/Paragraph';
import { HYPERLINK_STYLE_TYPES } from '~/constants';
import Hyperlink from '~/components/Hyperlink';
import AddToCartButtonFixture from '~/components/AddToCartButton/AddToCartButton.fixture';
import mockAddToCartButtonOnClick from '~/components/AddToCartButton/__mocks__/AddToCartButton.onClick';
import ProductDetailHeaderFixture from '~/components/ProductDetailHeader/ProductDetailHeader.fixture';
import ProductCommerce from './ProductCommerce';
import ProductCommerceFixture from './ProductCommerce.fixture';

<Meta title="Components/ProductCommerce" component={ProductCommerce} />

# ProductCommerce

Presented in a [Podium](?path=/docs/components-podium--base-component) component with `verticalPadding` and `horizontalPadding` set to *small*.

Requires `AddToCartContextProvider`, `ProductDetailContextProvider` and `VariantSelectContextProvider`.

<Preview>
  <Story name="Base component">
    <Podium horizontalPadding="small" verticalPadding="small">
      <AddToCartContextProvider onClick={mockAddToCartButtonOnClick}>
        <ProductDetailContextProvider
          product={ProductDetailHeaderFixture.product}
        >
          <VariantSelectContextProvider
            variants={ProductCommerceFixture.variantOptions}
          >
            <ProductCommerce
              copy={{
                addToCart: AddToCartButtonFixture.copy,
                ...ProductCommerceFixture.copy,
              }}
              cta={knobs.object('cta', ProductCommerceFixture.cta, 'Content')}
              description={
                <P>
                  {knobs.text(
                    'description',
                    ProductCommerceFixture.description,
                    'Content'
                  )}
                </P>
              }
              eyebrow={knobs.text(
                'eyebrow',
                ProductCommerceFixture.eyebrow,
                'Content'
              )}
              heading={knobs.text(
                'heading',
                ProductCommerceFixture.heading,
                'Content'
              )}
              size={ProductDetailHeaderFixture.product.size}
              theme={knobs.select(
                'theme',
                ['dark', 'light'],
                'dark',
                'Presentation'
              )}
            />
          </VariantSelectContextProvider>
        </ProductDetailContextProvider>
      </AddToCartContextProvider>
    </Podium>
  </Story>
</Preview>

## API

<Props of={ProductCommerce} />
